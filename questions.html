
<h3>Single Table:</h3>

Q: All rows from the <code>cities</code> table<br/>
A: <code>SELECT * FROM cities;</code>
<br/>
</br>

Q: All rows from the <code>stores</code> table<br/>
A: <code>SELECT * FROM stores;</code>
<br/>
<br/>


All stores and ratings
SELECT stores.name, stores.zagat_rating
FROM stores;

Q: All rows from the <code>salsas</code> table<br/>
A: <code>SELECT * FROM salsas;</code>
<br/>
<br/>

Q: All rows from the <code>tacos</code> table<br/>
A: <code>SELECT * FROM tacos;</code>
<br/>
<br/>

<h3>Specifying Fields</h3>
Q: <code>name</code> from the <code>salsas</code> table<br/>
A: <code>SELECT name FROM salsas;</code>
<br/>
<br/>

Q: <code>name</code> and <code>zagat_rating</code> from the <code>stores</code> table<br/>
A: <code>SELECT name, zagat_rating FROM stores;</code>
<br/>
<br/>

Q: <code>name</code> and <code>vegetarian</code> from the <code>tacos</code> table<br/>
A: <code>SELECT name, vegetarian FROM tacos;</code>
<br/>
<br/>

Q: <code>name</code> and <code>allows_drones</code> from the <code>cities</code> table<br/>
A: <code>SELECT name, allows_drones FROM cities;</code>
<br/>
<br/>

<h3>Filtering</h3>

Q: All fields from the <code>cities</code> table for cities that allow drones<br/>
A: <code>SELECT * FROM cities WHERE allows_drones = true;</code>
<br/>
<br/>

Q: All fields from the <code>stores</code> table for stores with a Zagat rating greater than 7<br/>
A: <code>SELECT * FROM stores WHERE zagat_rating > 7;</code>
<br/>
<br/>

Q: <code>name</code> from the <code>stores</code> table for stores with a Zagat rating greater than or equal to 8<br/>
A: <code>SELECT name FROM stores WHERE zagat_rating >= 8;</code>
<br/>
<br/>

Q: <code>name</code> from the <code>tacos</code> table for vegetarian tacos<br/>
A: <code>SELECT name FROM tacos WHERE vegetarian=true;</code>
<br/>
<br/>

Q: <code>id</code> and <code>name</code> from the <code>stores</code> table for stores that have a Zagat rating less than 5 and don&apos;t serve beer<br/>
A: <code>SELECT id, name FROM stores WHERE zagat_rating < 5 AND sells_beer = false;</code>
<br/>
<br/>

Q: <code>id</code> and <code>name</code> from the <code>stores</code> table for stores that have a Zagat rating less than 5 and don&apos;t serve beer<br/>
A: <code>SELECT id, name FROM stores WHERE zagat_rating < 5 AND sells_beer = false;</code>
<br/>
<br/>

Q: <code>name</code> and <code>zagat_rating</code> from <code>stores</code> for stores that have a Zagat rating greater than 7 or serve beer<br/>
A: <code>SELECT name, zagat_rating FROM stores WHERE zagat_rating > 7 OR sells_beer = false;</code>
<br/>
<br/>

Q: <code>name</code> and <code>zagat_rating</code> from <code>stores</code> for stores that have either have a Zagat rating greater than 8, or have a Zagat rating greater than 5 and serve beer<br/>
A: <code>SELECT name, zagat_rating FROM stores WHERE zagat_rating > 8 OR (zagat_rating > 5 AND sells_beer = true);</code>
<br/>
<br/>


Q: <code>name</code>, <code>zagat_rating</code>, and <code>sells_beer</code> from <code>stores</code> for stores that have either have a Zagat rating less than 5, or have a Zagat rating less than than 7 and don&apos;t serve beer<br/>
A: <code>
      SELECT name, zagat_rating, services_beer 
      FROM stores 
      WHERE zagat_rating < 5 
      OR (zagat_rating < 7 AND sells_beer = false);</code>
<br/>
<br/>

Q: All fields from <code>salsas</code> that have a spiciness between 5 and 7<br/>
A: <code>
    SELECT * 
    FROM salsas 
    WHERE spiciness 
    BETWEEN 5 AND 7;</code>
<br/>
<br/>

<h3>Inner Join</h3>

Q: All fields from <code>stores</code> plus all fields from the <code>cities</code> they are in 
<br/>
A: <code>
    SELECT * 
    FROM stores 
    JOIN cities 
    ON stores.city_id = cities.id;</code>
<br/>
<br/>

Q: <code>name</code> from <code>stores</code> and <code>allows_drones</code> from the city they are in<br/>
A: <code>
    SELECT stores.name, cities.allows_drones 
    FROM stores 
    JOIN cities 
    ON stores.city_id = cities.id;</code>
<br/>
<br/>

Q: All fields from <code>cities</code> plus all fields from <code>stores</code> for all stores 
<br/>
A: <code>
    SELECT * 
    FROM cities 
    JOIN stores 
    ON cities.id = stores.city_id;
   </code>
<br/>
<br/>

Q: <code>name</code> from <code>cites</code> as <code>city_name</code> and <code>name</code> from <code>stores</code> as <code>store_name</code> for all stores <br/>
A: <code>
    SELECT cities.name as city_name, stores.name as store_name 
    FROM cities 
    JOIN stores 
    ON cities.id = stores.city_id;
  </code>
<br/>
<br/>

Q: All fields from <code>stores</code> plus all fields from the <code>cities</code> they are in for stores with a Zagat rating greater than 8
<br/>
A: <code>
         SELECT * 
         FROM stores 
         JOIN cities ON stores.city_id = cities.id 
         WHERE stores.zagat_rating > 8;
   </code>
<br/>
<br/>

Q: All fields from <code>stores</code> plus all fields from the <code>cities</code> they are in for cities that allow drones
<br/>
A: <code>
      SELECT * 
      FROM stores 
      JOIN cities ON stores.city_id = cities.id 
      WHERE cities.allows_drones = true;
   </code>
<br/>
<br/>

Q: All fields from <code>stores</code> plus all fields from the <code>cities</code> they are in for cities that allow drones and stores that serve beer and have a zagat rating greater than 7
<br/>
A: <code>SELECT * 
         FROM stores 
         JOIN cities ON stores.city_id = cities.id 
         WHERE cities.allows_drones = true 
         AND stores.sells_beer = true 
         AND stores.zagat_rating > 6;</code>
<br/>
<br/>

<h3>Many-to-Many</h3>

Q: All fields from <code>stores</code> plus all fields from the <code>salsas</code> they serve
<br/>
A: <code>
    SELECT stores.*, salsas.* 
    FROM stores 
    JOIN store_salsas ON stores.id = store_salsas.store_id
    JOIN salsas ON store_salsas.salsa_id = salsas.id;
  </code>
<br/>
<br/>

Q: All fields from <code>stores</code> plus all fields from the <code>tacos</code> they serve
<br/>
A: <code>
    SELECT stores.*, tacos.* 
    FROM stores 
    JOIN store_tacos ON stores.id = store_tacos.store_id
    JOIN tacos ON store_tacos.salsa_id = tacos.id;
  </code>
<br/>
<br/>

Q: All fields from <code>stores</code> plus all fields from the <code>tacos</code> they serve if they're vegetarian
<br/>
A: <code>
    SELECT stores.*, tacos.* 
    FROM stores 
    JOIN store_tacos ON stores.id = store_tacos.store_id
    JOIN tacos ON store_tacos.salsa_id = tacos.id
    WHERE tacos.vegetarian = true;
  </code>
<br/>
<br/>

Q: All fields from <code>stores</code> plus all fields from the <code>salsas</code> they serve if the store sells beer
<br/>
A: <code>
    SELECT stores.*, salsas.* 
    FROM stores 
    JOIN store_salsas ON stores.id = store_salsas.store_id
    JOIN salsas ON store_salsas.salsa_id = salsas.id
    WHERE stores.sells_beer = true;
  </code>
<br/>
<br/>

Q: All fields from <code>stores</code> plus all fields from the <code>salsas</code> they serve if the spiciness is 8
<br/>
A: <code>
    SELECT stores.*, salsas.* 
    FROM stores 
    JOIN store_salsas ON stores.id = store_salsas.store_id
    JOIN salsas ON store_salsas.salsa_id = salsas.id
    WHERE store_salsas.spiciness = 8;
  </code>
<br/>
<br/>

Q: name from <code>stores</code>, name from <code>tacos</code>, and price
<br/>
A: <code>
    SELECT stores.name, tacos.name, store_tacos.price 
    FROM stores 
    JOIN store_tacos ON stores.id = store_tacos.store_id
    JOIN tacos ON store_tacos.taco_id = tacos.id;
  </code>
<br/>
<br/>

Q: name from <code>stores</code>, name from <code>tacos</code>, and price
<br/>
A: <code>
    SELECT stores.name, tacos.name, store_tacos.price 
    FROM stores 
    JOIN store_tacos ON stores.id = store_tacos.store_id
    JOIN tacos ON store_tacos.taco_id = tacos.id;
  </code>
<br/>
<br/>

Q: name from <code>stores</code>, name from <code>tacos</code>, and price where the store sells beer, the taco is not vegetarian and the price is less $3.50
<br/>
A: <code>
    SELECT stores.name, tacos.name, store_tacos.price 
    FROM stores 
    JOIN store_tacos ON stores.id = store_tacos.store_id
    JOIN tacos ON store_tacos.taco_id = tacos.id
    WHERE stores.sells_beer = true
    AND tacos.vegetarian = false
    AND store_tacos.price < 3.50;
  </code>
<br/>
<br/>

Q: name from <code>stores</code>, name from <code>cities</code>, name from <code>salsas</code>, and spiciness where the city allows drones and the salsa spiciness is between 4 and 6
<br/>
A: <code>
    SELECT stores.name, cities.name, salsas.name, store_salsas.spiciness 
    FROM stores 
    JOIN cities ON stores.city_id = cities.id
    JOIN store_salsas ON stores.id = store_salsas.store_id
    JOIN salsas ON store_salsas.salsa_id = salsas.id
    WHERE cities.allows_drones = true
    AND store_salsas.spiciness  BETWEEN 4 AND 6;
  </code>
<br/>
<br/>

City and number of stores

SELECT cities.id, cities.name, COUNT(stores.*)
FROM cities JOIN stores ON cities.id = stores.city_id
GROUP BY cities.id

City and highest highest and avg rating
SELECT cities.id, cities.name, MAX(stores.zagat_rating) AS max_rating, AVG(stores.zagat_rating) as avg_rating
FROM cities JOIN stores ON cities.id = stores.city_id
GROUP BY cities.id

City and store of highest rating
SELECT sub.name as city_name, stores.name, sub.max_rating
FROM (
  SELECT cities.id, cities.name, MAX(stores.zagat_rating) AS max_rating
  FROM cities
  JOIN stores ON cities.id = stores.city_id
  GROUP BY cities.id
) as sub
JOIN stores ON sub.max_rating = stores.zagat_rating
            AND sub.id = stores.city_id;

Store and price of taco bonanza
SELECT stores.name, SUM(store_tacos.price)
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
GROUP BY stores.id;


Stores with Chile de Arbol Salsa
SELECT stores.*
FROM stores
JOIN store_salsas ON stores.id = store_salsas.store_id
WHERE store_salsas.salsa_id = 2;

Stores with Al Pastor and Chile de Arbol Salsa
SELECT stores.*
FROM stores
JOIN store_salsas ON stores.id = store_salsas.store_id
JOIN store_tacos ON stores.id = store_tacos.store_id
WHERE store_salsas.salsa_id = 2
AND store_tacos.taco_id = 4;

Stores with Al Pastor and Zagat rating > 9 and and Chile de Arbol Salsa 
SELECT stores.*
FROM stores
JOIN store_salsas ON stores.id = store_salsas.store_id
JOIN store_tacos ON stores.id = store_tacos.store_id
WHERE store_salsas.salsa_id = 2
AND store_tacos.taco_id = 4
AND stores.zagat_rating > 8;

Stores with Al Pastor and Zagat rating > 9 and Chile de Arbol Salsa spicy > 7
SELECT stores.*
FROM stores
JOIN store_salsas ON stores.id = store_salsas.store_id
JOIN store_tacos ON stores.id = store_tacos.store_id
WHERE store_salsas.salsa_id = 2
AND store_tacos.taco_id = 4
AND stores.zagat_rating > 8
AND store_salsas.spiciness > 7;

Stores with vegetarian tacos
SELECT DISTINCT stores.*
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
JOIN tacos on store_tacos.taco_id = tacos.id
WHERE tacos.vegetarian;

Stores with vegetarian tacos < $3.50
SELECT DISTINCT stores.*
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
JOIN tacos on store_tacos.taco_id = tacos.id
WHERE tacos.vegetarian
AND store_tacos.price < 3.50;

Stores with vegetarian tacos and tacos < $3.50
SELECT DISTINCT stores.*
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
JOIN tacos AS veggie ON store_tacos.taco_id = veggie.id
                     AND veggie.vegetarian
JOIN tacos AS cheap ON store_tacos.taco_id = cheap.id
                    AND store_tacos.price < 3.50

Store and number of vegetarian tacos:
SELECT stores.*, COUNT(*)
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
JOIN tacos on store_tacos.taco_id = tacos.id
WHERE tacos.vegetarian
GROUP BY stores.id;

Stores and number of vegetarian taco less than $3.50
SELECT stores.*, COUNT(*)
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
JOIN tacos ON store_tacos.taco_id = tacos.id
WHERE tacos.vegetarian
AND store_tacos.price < 3.50
GROUP BY stores.id;

Stores and number of vegetarian tacos with zeros:
SELECT stores.*, count(tacos.id)
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
LEFT JOIN tacos ON store_tacos.taco_id = tacos.id
                AND tacos.vegetarian
GROUP BY stores.id;

Stores and number of vegetarian taco less than $3.50 with zeros
SELECT stores.*, count(tacos.id)
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
LEFT JOIN tacos ON store_tacos.taco_id = tacos.id
                AND tacos.vegetarian
                AND store_tacos.price < 3.50
GROUP BY stores.id;

stores with carne asada tacos and chili de arbol salsa
SELECT DISTINCT stores.*
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
                 AND store_tacos.taco_id = 1
JOIN store_salsas ON stores.id = store_salsas.store_id
                  AND store_salsas.salsa_id = 3;

Stores with carne asada tacos and pollo tacos
SELECT DISTINCT stores.*
FROM stores
JOIN store_tacos AS carne ON stores.id = carne.store_id
                 AND carne.taco_id = 1
JOIN store_tacos AS pollo ON stores.id = pollo.store_id
                          AND pollo.taco_id = 3;

Stores with veggie tacos and cheap tacos
SELECT DISTINCT stores.*
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
JOIN tacos AS veggie ON store_tacos.taco_id = tacos.id
                     AND tacos.vegetarian
JOIN tacos AS cheap ON store_tacos.taco_id = tacos.id
                    AND store_tacos.price < 3.50


Stores and number of vegetarian, and number of cheap with zeros
SELECT stores.*, count(veggie.id) as veggie_count, count(cheap.id) as cheap_count
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
LEFT JOIN tacos as veggie ON store_tacos.taco_id = veggie.id
                          AND veggie.vegetarian
LEFT JOIN tacos as cheap ON store_tacos.taco_id = cheap.id
                         AND store_tacos.price < 3.50
GROUP BY stores.id;


Stores with Al Pastor and Birria
SELECT *
FROM stores
JOIN store_tacos AS pastor ON stores.id = pastor.store_id
                           AND pastor.taco_id = 4
JOIN store_tacos AS birria ON stores.id = birria.store_id
                           AND birria.taco_id = 2;

Stores with Al Pastor and Birria and Zagat rating > 7 and Chile de Arbol Salsa 
SELECT *
FROM stores
JOIN store_tacos AS pastor ON stores.id = pastor.store_id
                           AND pastor.taco_id = 4
JOIN store_tacos AS birria ON stores.id = birria.store_id
                           AND birria.taco_id = 2
JOIN store_salsas ON stores.id = store_salsas.store_id
WHERE store_salsas.salsa_id = 2
AND stores.zagat_rating > 7;

Stores with vegetarian taco and Al Pastor with price < 4
Stores with vegetarian taco with price < 4 and Al Pastor with price < 4
Stores with vegetarian taco with price < 4 and Al Pastor with price < 4 in Carpinteria

Price of most expensive taco by city
SELECT cities.name, MAX(store_tacos.price)
FROM cities
JOIN stores ON cities.id = stores.city_id
JOIN store_tacos ON stores.id = store_tacos.store_id
GROUP BY cities.id


City and rating of highest rated store by city
SELECT cities.name, MAX(zagat_rating)
FROM cities
JOIN stores ON cities.id = stores.city_id
GROUP BY cities.id;

City, rating and name of highest rated store by city
SELECT cities.name, stores.name, stores.zagat_rating
FROM cities
JOIN stores ON cities.id = stores.city_id
JOIN (
  SELECT cities.id as city_id, MAX(zagat_rating) as max_rating
  FROM cities
  JOIN stores on cities.id = stores.city_id
  GROUP BY cities.id
) AS sub ON sub.city_id = cities.id 
         AND stores.zagat_rating = max_rating; 

City name, store name, taco name and price of most expensive taco by city
SELECT cities.name, stores.name, tacos.name, store_tacos.price
FROM cities
JOIN stores ON cities.id = stores.city_id
JOIN store_tacos ON stores.id = store_tacos.store_id
JOIN tacos ON store_tacos.taco_id = tacos.id
JOIN (
  SELECT cities.id as city_id, MAX(store_tacos.price) as highest_price
  FROM cities
  JOIN stores ON cities.id = stores.city_id
  JOIN store_tacos ON stores.id = store_tacos.store_id
  GROUP BY cities.id
) AS sub ON store_tacos.price = sub.highest_price
         AND cities.id = sub.city_id;

City and number of stores having greater than 5 stores
SELECT cities.name, COUNT(*) as store_count
FROM cities
JOIN stores ON cities.id = stores.city_id
GROUP BY cities.id
HAVING count(*) > 5;


store name and price of taco bonanza for stores that sell a Carne Asada
SELECT stores.name, SUM(store_tacos.price)
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
WHERE stores.id IN (
  SELECT store_tacos.store_id
  FROM store_tacos
  WHERE store_tacos.taco_id = 1
)
GROUP BY stores.id;


store name and price of taco bonanza for stores that sell a Carne Asada and Pico de Gallo
SELECT stores.name, SUM(store_tacos.price)
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
WHERE stores.id IN (
  SELECT store_tacos.store_id
  FROM store_tacos
  WHERE store_tacos.taco_id = 1
) 
AND stores.id IN (
  SELECT store_salsas.store_id
  FROM store_salsas
  WHERE store_salsas.salsa_id = 3
)
GROUP BY stores.id;

--OR--

SELECT stores.name, SUM(store_tacos.price)
FROM stores
JOIN store_tacos ON stores.id = store_tacos.store_id
WHERE stores.id IN (
  SELECT stores.id
  FROM stores
  JOIN store_tacos ON stores.id = store_tacos.store_id
                   AND store_tacos.taco_id = 1
  JOIN store_salsas ON stores.id = store_salsas.store_id
                    AND store_salsas.salsa_id = 3
) 
GROUP BY stores.id;


List of stores with no tacos less than $5
SELECT stores.*
FROM stores
WHERE stores.id NOT IN (
  SELECT stores.id
  FROM stores
  JOIN store_tacos ON stores.id = store_tacos.store_id
  WHERE store_tacos.price < 5
);


List of stores with no salsa spicier than 7
SELECT stores.*
FROM stores
WHERE stores.id NOT IN (
  SELECT stores.id
  FROM stores
  JOIN store_salsas ON stores.id = store_salsas.store_id
  WHERE store_salsas.spiciness > 7
);


List of stores in Montecito with no salsa spicier than 7
SELECT stores.*
FROM stores
WHERE stores.id NOT IN (
  SELECT stores.id
  FROM stores
  JOIN store_salsas ON stores.id = store_salsas.store_id
  WHERE store_salsas.spiciness > 7
)
AND stores.city_id = 3;


List of stores in Montecito or Santa Barbara with no salsa spicier than 7
SELECT stores.*
FROM stores
WHERE stores.id NOT IN (
  SELECT stores.id
  FROM stores
  JOIN store_salsas ON stores.id = store_salsas.store_id
  WHERE store_salsas.spiciness > 7
)
AND (stores.city_id = 3 OR stores.city_id = 2);


Stores that are only vegetarian
SELECT *
FROM stores
WHERE stores.id NOT IN (
  SELECT stores.id
  FROM stores
  JOIN store_tacos ON stores.id = store_tacos.store_id
  JOIN tacos ON store_tacos.taco_id = tacos.id
  WHERE tacos.vegetarian = false
);

City name and count of vegetarian stores
SELECT cities.name, COUNT(*)
FROM stores
JOIN cities ON stores.city_id = cities.id
WHERE stores.id NOT IN (
  SELECT stores.id
  FROM stores
  JOIN store_tacos ON stores.id = store_tacos.store_id
  JOIN tacos ON store_tacos.taco_id = tacos.id
  WHERE tacos.vegetarian = false
)
GROUP BY cities.id;


Cities where the best store is vegetarian
With name
Cities with no stores that serve beer
City with no stores that serve beer
City where all stores are rated less than 5
Vegetarian store with the most expensive bonanza
City with most stores
grouped by rating, city and count
Stores with the same name
Stores with the same name and the same rating
Stores with the same name and different ratings
Stores with same name in different cities
Cities which have a store rated 10
Cities with store count order by most
Store with highest average price per taco and avg

What stores have salsa de pina
What's the only salsa that's never hotter than 3
What's the only city without a store serving Pico de Gallo
What's the only chain to have its own salsa?
Cities with a chain
Stores with ⅘ salsas in common :)
Store # of tacos cheaper / more expensive, store # of tacos cheaper / more expensive
Chain store with special taco and salsa
Chain store with no custom tacos
Stores where all tacos same price
Stores where all tacos different price
Store with same menu at different prices
Tacos at stores with same menu at different prices
Tacos at store with same menu at different prices
Price of bonanza at largest selection
Price of Bonanza at highest price
List of tacos at largest selection
List of tacos at highest bonanza price
What salsas are not served in Goletta
2 stores with same tacos and 100% different tacos
2 stores same tacos same salsas
2 stores same tacos # of salsas in common
stores with different tacos, same salsas
What stores has spiciest pico de gallo?
Which stores have on avg spiciest
Mildest tomatillo
Same salsas at same spices
Same salsas at different spiciness
In same cities,
In different cities
How many different spicesses of pico are there with count
Write a query: What is the best tacqueria in Santa Barbara County?

Extra:
Stores and has_vegetarian

List of stores, whether they are in drone friendly cities, whether they have vegetarian, whether they have salsa spicier than 9, whether they have beef (birria or carne asada)

List of tacos with store and city of cheapest one

List of cities, the rating and name of the highest rated and  a carne asada or a birria for less than $5, 2 or more salsas spicier than 9, and at least 6 tacos in the bonanza which is under $30


At what store did Brad eat tacos next to Conan O'Brian
